<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Quote Generator</title>
  <link rel="stylesheet" href="index.css"> 
</head>
<body>
  <h1>Random Quote Generator</h1>
  <div id="quote-display">Click the button to load a quote!</div>
  <button id="new-quote-btn">Get Quote</button>
  <hr>
  <h2>Add Your Own Quote</h2>
  <form id="add-quote-form">
    <div>
      <label for="author-input">Author:</label>
      <input type="text" id="author-input" required>
    </div>
    <div>
      <label for="quote-input">Quote:</label>
      <textarea id="quote-input" required></textarea>
    </div>
    <button type="submit">Add Quote</button>
  </form>
  <div id="feedback-message"></div>
  <script>
    const quoteDisplay = document.getElementById("quote-display");
    const newQuoteBtn = document.getElementById("new-quote-btn");
    async function fetchQuote() {
      try {
        const response = await fetch("https://mikiyas-stp-quote-backend.hosting.codeyourfuture.io");
        const data = await response.json();
        quoteDisplay.textContent = `"${data.quote}" - ${data.author}`;
      } catch (err) {
        quoteDisplay.textContent = "Error fetching quote ðŸ˜¢";
        console.error(err);
      }
    }

    newQuoteBtn.addEventListener("click", fetchQuote);
    const addQuoteForm = document.getElementById("add-quote-form");
    const authorInput = document.getElementById("author-input");
    const quoteInput = document.getElementById("quote-input");
    const feedbackMessage = document.getElementById("feedback-message");
    addQuoteForm.addEventListener("submit", async (event) => {
      event.preventDefault();
      const author = authorInput.value;
      const quote = quoteInput.value;
      if (author.trim() === "" || quote.trim() === "") {
        displayFeedback("Both author and quote are required.", "error");
        return;
      }
      try {
        const response = await fetch("https://mikiyas-stp-quote-backend.hosting.codeyourfuture.io/quotes", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({ author, quote }),
        });
        const result = await response.json();
        if (response.ok) {
          displayFeedback(result.message, "success");
          addQuoteForm.reset();
        } else {
          displayFeedback(result.message, "error");
        }
      } catch (err) {
        displayFeedback("An unexpected error occurred. Please try again later.", "error");
        console.error("Fetch error:", err);
      }
    });
    function displayFeedback(message, type) {
      feedbackMessage.textContent = message;
      feedbackMessage.className = type;
    }
  </script>
</body>
</html>